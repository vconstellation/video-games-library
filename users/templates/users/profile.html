{% extends "layout/base.html" %}
{% block content %}
<div class="jumbotron jumbo-profile" style="background-image: url('{{ user.profile.background_image.url }}')";>
    <div class="container container-relative">
        <div class="profile-img">
            <img class="rounded-circle" src="{{ user.profile.avatar.url }}" alt=""/>
        </div>
        <br>
        <br>
    </div>
</div>

        <div class="container emp-profile">
            <form method="post">
                <div class="row">
                    <div class="col-md-4">
                        <p>Bio:</p>
                        <p>{{ user.profile.bio }}</p>
                    </div>
                    <div class="col-md-6">
                        <div class="profile-head">
                                    <h5>
                                        Name: {{ user.profile.nickname }}
                                    </h5>
                                    <h6>
                                        Date Joined:
                                        {{ user.date_joined }}
                                    </h6>
                                    <p class="proile-rating">GAMES IN COLLECTION: <span>{{ user.profile.game.count }}</span></p>
                            <ul class="nav nav-tabs" id="myTab" role="tablist">
                              <li class="nav-item" role="presentation">
                                <a class="nav-link active" id="home-tab" data-bs-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">About</a>
                              </li>
                              <li class="nav-item" role="presentation">
                                <a class="nav-link" id="playing-tab" data-bs-toggle="tab" href="#playing" role="tab" aria-controls="playing" aria-selected="false">Currently Playing</a>
                              </li>
                              <li class="nav-item" role="presentation">
                                <a class="nav-link" id="collection-tab" data-bs-toggle="tab" href="#collection" role="tab" aria-controls="collection" aria-selected="false">Collection</a>
                              </li>
                              <li class="nav-item" role="presentation">
                                <a class="nav-link" id="specs-tab" data-bs-toggle="tab" href="#specs" role="tab" aria-controls="specs" aria-selected="false">Specs</a>
                              </li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <a class="profile-edit-btn" href="{% url 'profile-update' slug=user.profile.slug %}">Edit Profile</a>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="profile-work">
                            <hr>
                            <p>LINKS</p>
                            <a href="{{ user.profile.steam_link }}">Steam Profile</a><br/>
                        </div>
                    </div>
                    <div class="col-md-8">
                        <div class="tab-content profile-tab" id="myTabContent">
                            <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Primary platform</label>
                                            </div>
                                            <div class="col-md-6">
                                                <p>
                                                {% for i in user.profile.platform_used.all %}
                                                    {{ i }},
                                                {% endfor %}
                                                </p>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Games completed:</label>
                                            </div>
                                            <div class="col-md-6">
                                                <p>{{ user.profile.calculate_finished_games }} out of {{ user.profile.game.count }}</p>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Games reviewed:</label>
                                            </div>
                                            <div class="col-md-6">
                                                <p>{{ user.gamesreviews_set.all.count }}</p>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Currently playing:</label>
                                            </div>
                                            <div class="col-md-6">
                                                <p>{{ user.profile.calculate_currently_played_games }}</p>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Preferred genre:</label>
                                            </div>
                                            <div class="col-md-6">
                                                <p>MMORPG</p>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Favorite title:</label>
                                            </div>
                                            <div class="col-md-6">
                                                <p>Witcher 1</p>
                                            </div>
                                        </div>
                            </div>
                            <div class="tab-pane fade" id="collection" role="tabpanel" aria-labelledby="collection-tab">
                                        {% for i in user.profile.profilegamescollection_set.all %}
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Title:</label>
                                            </div>
                                            <div class="col-md-6">
						                        <a href="{% url 'game-detail' i.games_collection.id %}">{{ i.games_collection.name }}</a>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Genre:</label>
                                            </div>
                                            <div class="col-md-6">
                                                <p>{{ i.games_collection.genre }}</p>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Completed:</label>
                                            </div>
                                            <div class="col-md-6">
                                                {% if i.currently_playing %}
                                                    <p>Skonczone</p>
                                                {% else %}
                                                    <p>Nie</p>
                                                {% endif %}
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Delete:</label>
                                            </div>
                                            <div class="col-md-6">
                                                <a href="{% url 'profile-game-delete' slug=user.profile.slug pk=i.pk %}">Kliknej</a>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Update:</label>
                                            </div>
                                            <div class="col-md-6">
                                                <a href="{% url 'profile-single-update' slug=user.profile.slug pk=i.pk %}">Updetnij</a>
                                            </div>
                                        </div>
                                        <hr/>
                                        {% endfor %}
                                <div class="row">
                                    <div class="col-md-12">
                                        <a href="{% url 'profile-game-update' %}">Add another game</a>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="specs" role="tabpanel" aria-labelledby="specs-tab">
                                <h3>Placeholder text</h3>
                                <h4>Tutaj beda specyfikacje i sprzęt</h4>
                            </div>
                            <div class="tab-pane fade" id="playing" role="tabpanel" aria-labelledby="playing-tab">
                                {% for i in user.profile.profilegamescollection_set.all %}
                                    {% if i.currently_playing is True %}
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label>Title:</label>
                                        </div>
                                        <div class="col-md-6">
                                            <a href="{% url 'game-detail' i.id %}">{{ i.games_collection.name }}</a>
                                        </div>
                                    </div>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
{% endblock %}
